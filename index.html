<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Psic√≥loga - Bienvenida</title>
    <meta name="description" id="meta-desc" content="Psicoterapia profesional">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600;700&family=Work+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- WhatsApp Floating Button -->
    <a href="#" id="whatsapp-float" class="whatsapp-float" target="_blank" aria-label="Contactar por WhatsApp">
        <svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M16 0C7.163 0 0 7.163 0 16c0 2.825.737 5.482 2.028 7.784L.064 31.267l7.653-1.933A15.937 15.937 0 0016 32c8.837 0 16-7.163 16-16S24.837 0 16 0z" fill="#25D366"/>
            <path d="M25.229 22.817c-.342.963-2.012 1.766-2.926 1.877-.781.093-1.801.14-2.905-.182-.67-.195-1.527-.455-2.621-.892-4.585-1.834-7.568-6.472-7.796-6.77-.227-.299-1.85-2.461-1.85-4.695 0-2.234 1.173-3.33 1.588-3.784.416-.455.908-.568 1.21-.568.303 0 .605.002.871.016.279.013.654-.106.995.758.342.864 1.166 2.843 1.268 3.048.102.205.171.444.034.743-.137.298-.205.485-.41.745-.205.26-.43.58-.615.779-.205.22-.417.458-.18.898.238.44 1.057 1.743 2.268 2.825 1.557 1.39 2.869 1.822 3.278 2.027.41.205.649.171.888-.103.239-.274.923-1.079 1.169-1.452.246-.373.492-.311.829-.186.337.125 2.14 1.01 2.508 1.193.369.183.615.274.705.425.09.15.09.864-.252 1.827z" fill="#fff"/>
        </svg>
    </a>

    <!-- Navigation -->
    <nav class="main-nav">
        <div class="nav-container">
            <a href="#inicio" class="nav-logo" id="nav-logo">Psic√≥loga</a>
            <button class="mobile-menu-toggle" aria-label="Abrir men√∫">
                <span></span><span></span><span></span>
            </button>
            <ul class="nav-links">
                <li><a href="#inicio">Inicio</a></li>
                <li><a href="#sobre-mi">Sobre M√≠</a></li>
                <li><a href="#servicios">Servicios</a></li>
                <li><a href="#recursos">Recursos</a></li>
                <li><a href="#blog">Blog</a></li>
                <li><a href="#contacto" class="nav-cta">Reservar Cita</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="inicio" class="hero">
        <div class="hero-content">
            <div class="hero-text">
                <h1 class="hero-title" id="hero-title">Cargando...</h1>
                <p class="hero-subtitle" id="hero-subtitle"></p>
                <div class="hero-buttons">
                    <a href="#contacto" class="btn btn-primary" id="hero-btn-1">Reservar Cita</a>
                    <a href="#sobre-mi" class="btn btn-secondary" id="hero-btn-2">Conocer M√°s</a>
                </div>
            </div>
            <div class="hero-image">
                <div class="hero-image-placeholder" id="hero-image"></div>
            </div>
        </div>
    </section>

    <!-- Sobre M√≠ -->
    <section id="sobre-mi" class="about">
        <div class="container">
            <div class="about-content">
                <div class="about-image">
                    <div class="about-image-placeholder" id="about-image"></div>
                </div>
                <div class="about-text">
                    <span class="section-label">Sobre M√≠</span>
                    <h2 id="about-title">Tu bienestar es mi prioridad</h2>
                    <p id="about-bio1"></p>
                    <p id="about-bio2"></p>
                    <div class="credentials">
                        <div class="credential-item">
                            <span class="credential-icon">üéì</span>
                            <div>
                                <strong>Formaci√≥n</strong>
                                <p id="about-education"></p>
                            </div>
                        </div>
                        <div class="credential-item">
                            <span class="credential-icon">üìã</span>
                            <div>
                                <strong>Colegiaci√≥n</strong>
                                <p>N¬∫ Col. <span id="about-colegiacion"></span> - Colegio Oficial de Psicolog√≠a</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Servicios -->
    <section id="servicios" class="services">
        <div class="container">
            <div class="section-header">
                <span class="section-label">Servicios</span>
                <h2>C√≥mo puedo ayudarte</h2>
            </div>
            <div class="services-grid" id="services-grid"></div>
        </div>
    </section>

    <!-- Recursos -->
    <section id="recursos" class="resources">
        <div class="container">
            <div class="section-header">
                <span class="section-label">Recursos</span>
                <h2>Material descargable</h2>
                <p>Herramientas y gu√≠as para tu bienestar emocional</p>
            </div>
            <div id="resources-grid" class="resources-grid"></div>
        </div>
    </section>

    <!-- Blog/Noticias -->
    <section id="blog" class="blog">
        <div class="container">
            <div class="section-header">
                <span class="section-label">Blog</span>
                <h2>Art√≠culos y novedades</h2>
            </div>
            <div id="blog-grid" class="blog-grid"></div>
        </div>
    </section>

    <!-- Contacto y Citas -->
    <section id="contacto" class="contact">
        <div class="container">
            <div class="contact-content">
                <div class="contact-info">
                    <span class="section-label">Contacto</span>
                    <h2>Reserva tu primera consulta</h2>
                    <p>Puedes agendar una cita a trav√©s de mi calendario online o contactarme directamente.</p>
                    
                    <div class="contact-methods">
                        <div class="contact-method">
                            <span class="contact-icon">üìß</span>
                            <div>
                                <strong>Email</strong>
                                <a href="#" id="contact-email">contacto@ejemplo.com</a>
                            </div>
                        </div>
                        <div class="contact-method">
                            <span class="contact-icon">üì±</span>
                            <div>
                                <strong>WhatsApp / Tel√©fono</strong>
                                <a href="#" id="contact-phone">+34 XXX XXX XXX</a>
                            </div>
                        </div>
                        <div class="contact-method">
                            <span class="contact-icon">üìç</span>
                            <div>
                                <strong>Ubicaci√≥n</strong>
                                <p>Madrid, Espa√±a | Online</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="calendar-widget" id="calendar-widget">
                    <!-- DOCFAV integration will be loaded here -->
                    <p style="text-align: center; padding: 40px; color: var(--text-light);">
                        Sistema de citas en configuraci√≥n...
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4 id="footer-name">Psic√≥loga</h4>
                    <p>Psic√≥loga cl√≠nica colegiada especializada en terapia humanista e integrativa.</p>
                </div>
                <div class="footer-section">
                    <h4>Navegaci√≥n</h4>
                    <ul>
                        <li><a href="#inicio">Inicio</a></li>
                        <li><a href="#sobre-mi">Sobre M√≠</a></li>
                        <li><a href="#servicios">Servicios</a></li>
                        <li><a href="#contacto">Contacto</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="#privacidad">Pol√≠tica de Privacidad</a></li>
                        <li><a href="#cookies">Pol√≠tica de Cookies</a></li>
                        <li><a href="#aviso-legal">Aviso Legal</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>S√≠gueme</h4>
                    <div class="social-links" id="social-links"></div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 <span id="footer-copy"></span>. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        // Load data from data.json
        let siteData = null;

        async function loadData() {
            try {
                const response = await fetch('data.json');
                if (!response.ok) {
                    console.warn('data.json not found, using defaults');
                    loadDefaults();
                    return;
                }
                siteData = await response.json();
                applyData();
            } catch (error) {
                console.error('Error loading data:', error);
                loadDefaults();
            }
        }

        function loadDefaults() {
            siteData = {
                hero: {
                    title: 'Bienestar emocional y crecimiento personal',
                    subtitle: 'Psicoterapia profesional con enfoque humanista e integrativo.',
                    btnPrimary: 'Reservar Primera Consulta',
                    btnSecondary: 'Conocer M√°s'
                },
                about: {
                    title: 'Tu bienestar es mi prioridad',
                    bio1: 'Psic√≥loga cl√≠nica colegiada.',
                    bio2: 'Enfoque humanista e integrativo.',
                    education: 'Licenciada en Psicolog√≠a',
                    colegiacion: 'XXXXX'
                },
                services: [],
                blog: [],
                resources: [],
                config: {
                    name: 'Psic√≥loga',
                    email: 'contacto@ejemplo.com',
                    whatsapp: '34XXXXXXXXX',
                    phone: '+34 XXX XXX XXX'
                }
            };
            applyData();
        }

        function applyData() {
            const { hero, about, services, blog, resources, config } = siteData;
            
            // Hero
            document.getElementById('hero-title').textContent = hero.title;
            document.getElementById('hero-subtitle').textContent = hero.subtitle;
            document.getElementById('hero-btn-1').textContent = hero.btnPrimary;
            document.getElementById('hero-btn-2').textContent = hero.btnSecondary;
            if (hero.image) {
                document.getElementById('hero-image').style.backgroundImage = `url(${hero.image})`;
                document.getElementById('hero-image').style.backgroundSize = 'cover';
            }
            
            // About
            document.getElementById('about-title').textContent = about.title;
            document.getElementById('about-bio1').textContent = about.bio1;
            document.getElementById('about-bio2').textContent = about.bio2;
            document.getElementById('about-education').textContent = about.education;
            document.getElementById('about-colegiacion').textContent = about.colegiacion;
            if (about.image) {
                document.getElementById('about-image').style.backgroundImage = `url(${about.image})`;
                document.getElementById('about-image').style.backgroundSize = 'cover';
            }
            
            // Services
            const servicesGrid = document.getElementById('services-grid');
            if (services && services.length > 0) {
                servicesGrid.innerHTML = services.map(s => `
                    <div class="service-card">
                        <div class="service-icon">${s.icon || '‚ú®'}</div>
                        <h3>${s.name}</h3>
                        <p>${s.description}</p>
                    </div>
                `).join('');
            }
            
            // Blog
            const blogGrid = document.getElementById('blog-grid');
            if (blog && blog.length > 0) {
                blogGrid.innerHTML = blog.map(post => `
                    <article class="blog-card">
                        ${post.image ? `<img src="${post.image}" alt="${post.title}" style="width:100%;height:240px;object-fit:cover;">` : '<div class="blog-image-placeholder"></div>'}
                        <div class="blog-content">
                            <span class="blog-date">${post.date}</span>
                            <h3>${post.title}</h3>
                            <p>${post.content.substring(0, 150)}...</p>
                            <a href="#" class="blog-link" onclick="showPost(${post.id}); return false;">Leer m√°s ‚Üí</a>
                        </div>
                    </article>
                `).join('');
            } else {
                blogGrid.innerHTML = '<p style="grid-column:1/-1;text-align:center;padding:40px;color:var(--text-light);">Pr√≥ximamente contenido nuevo...</p>';
            }
            
            // Resources
            const resourcesGrid = document.getElementById('resources-grid');
            if (resources && resources.length > 0) {
                const icons = { pdf: 'üìÑ', audio: 'üéµ', video: 'üé¨' };
                resourcesGrid.innerHTML = resources.map(r => `
                    <div class="resource-card">
                        <div class="resource-icon">${icons[r.type] || 'üìÑ'}</div>
                        <h3>${r.title}</h3>
                        <p>${r.description}</p>
                        <a href="${r.file}" class="resource-download" download>Descargar ${r.type.toUpperCase()}</a>
                    </div>
                `).join('');
            } else {
                resourcesGrid.innerHTML = '<p style="grid-column:1/-1;text-align:center;padding:40px;color:var(--text-light);">Recursos pr√≥ximamente...</p>';
            }
            
            // Config
            document.getElementById('nav-logo').textContent = config.name;
            document.getElementById('footer-name').textContent = config.name;
            document.getElementById('footer-copy').textContent = config.name;
            document.getElementById('page-title').textContent = `${config.name} - Psic√≥loga`;
            
            document.getElementById('contact-email').href = `mailto:${config.email}`;
            document.getElementById('contact-email').textContent = config.email;
            document.getElementById('contact-phone').textContent = config.phone;
            document.getElementById('whatsapp-float').href = `https://wa.me/${config.whatsapp}`;
            
            if (config.metaDescription) {
                document.getElementById('meta-desc').setAttribute('content', config.metaDescription);
            }
            
            // DOCFAV integration
            if (config.docfavUrl) {
                const calendarWidget = document.getElementById('calendar-widget');
                if (config.docfavWidget) {
                    calendarWidget.innerHTML = config.docfavWidget;
                } else {
                    calendarWidget.innerHTML = `
                        <iframe src="${config.docfavUrl}" 
                                style="width:100%;min-height:600px;border:none;border-radius:8px;"
                                title="Reservar cita"></iframe>
                    `;
                }
            }
            
            // Social links
            const socialLinks = document.getElementById('social-links');
            let social = '';
            if (config.instagram) social += `<a href="${config.instagram}" target="_blank" aria-label="Instagram">IG</a>`;
            if (config.linkedin) social += `<a href="${config.linkedin}" target="_blank" aria-label="LinkedIn">LI</a>`;
            if (config.facebook) social += `<a href="${config.facebook}" target="_blank" aria-label="Facebook">FB</a>`;
            if (config.youtube) social += `<a href="${config.youtube}" target="_blank" aria-label="YouTube">YT</a>`;
            socialLinks.innerHTML = social || '<p>S√≠gueme en redes</p>';
        }

        function showPost(id) {
            const post = siteData.blog.find(p => p.id === id);
            if (post) {
                alert(`${post.title}\n\n${post.content}`);
            }
        }

        // Mobile menu toggle
        document.querySelector('.mobile-menu-toggle').addEventListener('click', () => {
            document.querySelector('.nav-links').classList.toggle('active');
        });

        // Smooth scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', (e) => {
                const href = anchor.getAttribute('href');
                if (href === '#') return;
                e.preventDefault();
                const target = document.querySelector(href);
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                    document.querySelector('.nav-links').classList.remove('active');
                }
            });
        });

        // Load data on page load
        loadData();
    </script>
</body>
</html>
